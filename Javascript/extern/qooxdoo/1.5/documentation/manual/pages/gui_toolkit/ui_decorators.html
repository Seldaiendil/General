
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Decorators &mdash; qooxdoo v1.5 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="qooxdoo v1.5 documentation" href="../../index.html" />
    <link rel="up" title="GUI Toolkit" href="../gui_toolkit.html" />
    <link rel="next" title="Web Fonts" href="ui_webfonts.html" />
    <link rel="prev" title="Custom Themes" href="ui_custom_themes.html" /> 
  </head>
  <body>

		<div class="header">
			<div class="headcenter">
		    <a href="/"><img id="logo" src="http://resources.qooxdoo.org/images/logo.gif" alt="qooxdoo logo"/></a>
		
		    <h1 style="display: none;">qooxdoo</h1>
		    <h2 class="subline">the new era of web development</h2>
		  </div>
			<div class="navigation">
				<a href="http://qooxdoo.org">Home</a>
				<a href="http://qooxdoo.org/about">About</a>
				<a href="http://news.qooxdoo.org/">News</a>
				<a href="http://qooxdoo.org/demo">Demo</a>
				<a class="current" href="http://qooxdoo.org/documentation">Documentation</a>
				<a href="http://qooxdoo.org/community">Community</a>
				<a href="http://qooxdoo.org/download">Download</a>
				<a href="http://bugzilla.qooxdoo.org/">Bugs</a>
			</div>
			<div class="subheader">&nbsp;</div>
		</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ui_webfonts.html" title="Web Fonts"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ui_custom_themes.html" title="Custom Themes"
             accesskey="P">previous</a> |</li>
				<li> &raquo; <a href="http://qooxdoo.org">Home</a> &raquo;</li>
        <li><a href="../../index.html">qooxdoo v1.5 documentation</a> &raquo;</li>
          <li><a href="../gui_toolkit.html" accesskey="U">GUI Toolkit</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="decorators">
<span id="pages-gui-toolkit-ui-decorators-decorators"></span><h1>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="pages-gui-toolkit-ui-decorators-introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Decorations are used to style widgets. The idea is to have an independent layer around the widget content that can be freely styled. This way you can have separate decorators that define all kinds of decoration (colors, background image, corners, ...), and apply them to existing widgets, without interfering with the widget code itself.</p>
<p>Decorations are used for both, the <tt class="docutils literal"><span class="pre">shadow</span></tt> and the <tt class="docutils literal"><span class="pre">decorator</span></tt> property. They could be applied separately or together. There is no dependency between them.</p>
</div>
<div class="section" id="using-decorators">
<span id="pages-gui-toolkit-ui-decorators-using-decorators"></span><h2>Using Decorators<a class="headerlink" href="#using-decorators" title="Permalink to this headline">¶</a></h2>
<p>Generally all decorators used should be part of the selected decorator theme. The convention is that each decorator instance is stored under a semantic name. To use names which describe the appearance of the decorator is bad because it may make themes less compatible to each other.</p>
<p>It is also regarded as bad style to make use of so-named inline decorators which are created by hand as part of a function call. The reason for this is that generally decorators defined by the theme may be used in multiple places. This means that widgets and application code should not directly deal with decorator instances.</p>
</div>
<div class="section" id="decoration-theme">
<span id="pages-gui-toolkit-ui-decorators-decoration-theme"></span><h2>Decoration Theme<a class="headerlink" href="#decoration-theme" title="Permalink to this headline">¶</a></h2>
<p>As mentioned above, it is common to define the decorators in a decorator theme. This is really easy because you have to specify only a few details about the decorator.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;main&quot;</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="nx">decorator</span><span class="o">:</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">decoration</span><span class="p">.</span><span class="nx">Uniform</span><span class="p">,</span>

  <span class="nx">style</span> <span class="o">:</span>
  <span class="p">{</span>
    <span class="nx">width</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">color</span> <span class="o">:</span> <span class="s2">&quot;background-selected&quot;</span>
  <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
<p>The first thing you see is the name of the decorator, in this case, <tt class="docutils literal"><span class="pre">main</span></tt>. The specified decorator is available using that name in the whole application code, especially in the appearance theme. The next thing you see in the map is the <tt class="docutils literal"><span class="pre">decorator</span></tt> key, that defines the decorator to use. The last thing is the styles map which contains values for the properties of the given decorator.</p>
<p>This is the way using prebuild decorators. You can also use the decorator mixins in the theme:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;scroll-knob&quot;</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="nx">decorator</span> <span class="o">:</span> <span class="p">[</span>
    <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">decoration</span><span class="p">.</span><span class="nx">MBorderRadius</span><span class="p">,</span>
    <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">decoration</span><span class="p">.</span><span class="nx">MSingleBorder</span><span class="p">,</span>
    <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">decoration</span><span class="p">.</span><span class="nx">MBackgroundColor</span>
  <span class="p">],</span>

  <span class="nx">style</span> <span class="o">:</span>
  <span class="p">{</span>
    <span class="nx">radius</span> <span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="nx">width</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">color</span> <span class="o">:</span> <span class="s2">&quot;button-border&quot;</span><span class="p">,</span>
    <span class="nx">backgroundColor</span> <span class="o">:</span> <span class="s2">&quot;scrollbar-bright&quot;</span>
  <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
<p>The main difference here is that not a reference to a prebuild decorator is given. Instead, an array containing mixins implementing single features are used. The theming system combines those mixins in a decorator. The styles map should now containg values for properties defined by the mixins.</p>
<p>Sometimes it is very handy to change change only little details about the decorator. Imagine a special decorator for hovered buttons. Inheritance comes in very handy in such a case.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;scroll-knob-pressed&quot;</span> <span class="o">:</span>
<span class="p">{</span>
  <span class="nx">include</span> <span class="o">:</span> <span class="s2">&quot;scroll-knob&quot;</span><span class="p">,</span>

  <span class="nx">style</span> <span class="o">:</span>
  <span class="p">{</span>
    <span class="nx">backgroundColor</span> <span class="o">:</span> <span class="s2">&quot;scrollbar-dark&quot;</span>
  <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
<p>As you can see here, we include the previously defined decorator and override the backgroundColor property. Thats all you need to do!</p>
</div>
<div class="section" id="custom-decorators">
<span id="pages-gui-toolkit-ui-decorators-custom-decorators"></span><h2>Custom Decorators<a class="headerlink" href="#custom-decorators" title="Permalink to this headline">¶</a></h2>
<p>Custom decorators are created by extending the decorator theme and adding new ones or overwriting existing ones. Each decorator class comes with a set of properties for configuration of the instance. Following a short description of the available decorators:</p>
<ul class="simple">
<li><strong>Background</strong>: Renders a background image or color</li>
<li><strong>Uniform</strong>: Like <tt class="docutils literal"><span class="pre">Background</span></tt>, but adds support for a uniform border which is identical for all edges.</li>
<li><strong>Single</strong>: Like <tt class="docutils literal"><span class="pre">Background</span></tt>, but adds support for separate borders for each edge.</li>
<li><strong>Double</strong>: Like <tt class="docutils literal"><span class="pre">Single</span></tt> but with the option to add two separate border to each edge.</li>
<li><strong>Beveled</strong>: Pseudo (lightweight) rounded border with support for inner glow. May contain a background image / gradient.</li>
<li><strong>HBox</strong>: Uses three images in a row with a center image which is stretched horizontally. Useful for widgets with a fixed height, which can be stretched horizontally.</li>
<li><strong>VBox</strong>: Uses three images in a column with a center image which is stretched vertically. Useful for widgets with a fixed width, which can be stretched vertically.</li>
<li><strong>Grid</strong>: Complex decorator based on nine images. Allows very customized styles (rounded borders, alpha transparency, gradients, ...). Optionally make use of image sprites to reduce image number.</li>
</ul>
<p>Each entry of the theme is automatically made available using the <tt class="docutils literal"><span class="pre">setDecorator</span></tt>/<tt class="docutils literal"><span class="pre">setShadow</span></tt> functions of the widget class. The instances needed are automatically created when required initially. This mechanism keeps instance numbers down and basically ignores decorators which are defined but never used.</p>
<p>Additionall to these explicit decorators, qooxdoo supplies a set of Mixins which supply separate features for decorators. These mixins can be used to build a decorator on runtime by the theming system. All feature mixins can be used in combination to get an individual decorator. The mixins also include some features not available in the standalone decorators.</p>
<ul class="simple">
<li><strong>MBackgroundColor</strong>: for drawing a background color</li>
<li><strong>MBackgroundImage</strong>: for drawing a background image</li>
<li><strong>MDoubleBorder</strong>: for drawing two borders around a widget</li>
<li><strong>MSingleBorder</strong>: for drawing a single border</li>
<li><strong>MBorderRadius</strong>: for adding a CSS radius to the corners</li>
<li><strong>MBoxShadow</strong>: for adding a CSS box shado to the widget (does not use the shadow property)</li>
<li><strong>MLinearBackgroundGradient</strong>: for drawing a linear gradient in the background</li>
</ul>
<p>As you may have guessed, the last three mixins do not work cross browser due to the fact that they rely on CSS propertes not available in all browsers. If you want more details, take a look at the <a class="reference external" href="http://demo.qooxdoo.org/current/apiviewer/#qx.ui.decoration">API documentations of the mixins</a>.</p>
</div>
<div class="section" id="writing-decorators">
<span id="pages-gui-toolkit-ui-decorators-writing-decorators"></span><h2>Writing Decorators<a class="headerlink" href="#writing-decorators" title="Permalink to this headline">¶</a></h2>
<p>It is easily possible to write custom decorators. <a class="reference external" href="http://demo.qooxdoo.org/1.5/apiviewer/#qx.ui.decoration.IDecorator">The interface</a> is quite trivial to implement. There are only five methods which needs to be implemented:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">getInsets</span></tt>: Returns a map of insets (space the decorator needs) e.g. the border width</li>
<li><tt class="docutils literal"><span class="pre">getMarkup</span></tt>: Returns the initial markup needed to build the decorator. This is executed by each widget using the decorator. This method may not be used by some decorators and this way is defined as an empty method.</li>
<li><tt class="docutils literal"><span class="pre">init</span></tt>: Normally used to initialize the given element using <tt class="docutils literal"><span class="pre">getMarkup</span></tt>. Only executed once per element (read per widget).</li>
<li><tt class="docutils literal"><span class="pre">resize</span></tt>: Resizes the given element to the given dimensions. Directly works on the DOM to manipulate the content of the element.</li>
<li><tt class="docutils literal"><span class="pre">tint</span></tt>: Applies the given background color or resets it to the (optionally) locally defined background color. This method may not be used by some decorators and this way is defined as an empty method.</li>
</ul>
<p>One thing to additionally respect is that <tt class="docutils literal"><span class="pre">resize</span></tt> and <tt class="docutils literal"><span class="pre">tint</span></tt> should be as fast as possible. They should be as minimal as possible as they are executed on every switch to the decorator (e.g. hover effects). All things which are possible to do once, in <tt class="docutils literal"><span class="pre">getMarkup</span></tt> or <tt class="docutils literal"><span class="pre">init</span></tt> methods, should be done there for performance reasons. Decorators are regarded as imutable. Once they are used somewhere there is no need to be able to change them anymore.</p>
<p>Each decorator configuration means exactly one decorator instance (created with the first usage). Even when dozens of widgets use the decorator only one instance is used. To cache the markup is a good way to improve the initial time to create new element instances. These configured elements are reused e.g. a hover effect which moves from &quot;Button 1&quot; to &quot;Button 2&quot; uses the same DOM element when reaching &quot;Button 2&quot; as it has used in &quot;Button 1&quot;. This way the number of DOM elements needed is reduced dramatically. Generally each decorator instance may be used to create dozens of these elements, but after some time enough elements may have been created to fulfill all further needs for the same styling.</p>
</div>
<div class="section" id="writing-decorator-mixins">
<span id="pages-gui-toolkit-ui-decorators-writing-decorator-mixins"></span><h2>Writing Decorator Mixins<a class="headerlink" href="#writing-decorator-mixins" title="Permalink to this headline">¶</a></h2>
<p>If you want to use your custom decorator with some build in decorator mixins, you can write you decorator as mixin and use it in combination with all the other mixins. Its comparable to writing a standalone decorator. You are able to implement the following methods:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">_style&lt;yourName&gt;</span></tt>: This method has a styles map as parameter which should be manipulated directly. That way, you can just append your styles and thats it.</li>
<li><tt class="docutils literal"><span class="pre">_resize&lt;yourName&gt;</span></tt>: The resize method is a bit differnet than the resize of the standalone decorators. It should return a map containing the desired position and dimension after the resize. The theme system then calculates the new position for the combination of the mixins and appies it to the element.</li>
<li><tt class="docutils literal"><span class="pre">_tint&lt;yourName&gt;</span></tt>: The tint method is an easy one which will be called if available. It could be the same as in the standalone case.</li>
<li><tt class="docutils literal"><span class="pre">_getDefaultInsetsFor&lt;yourName&gt;</span></tt>: This method should return the desired insets for this feaure. Again, the system takes care of calculating the propper insets for the combination of the mixins.</li>
<li><tt class="docutils literal"><span class="pre">_generateMarkup</span></tt>: Is used to crate the markup as HTML string.</li>
</ul>
<p>As you can see, every mixin can define its own methods for <tt class="docutils literal"><span class="pre">getMarkup</span></tt>, <tt class="docutils literal"><span class="pre">resize</span></tt>, <tt class="docutils literal"><span class="pre">tint</span></tt> and the <tt class="docutils literal"><span class="pre">insets</span></tt>. The theme system combines all the methods given by the separate widgets to one big working method.
A single special cas is the <tt class="docutils literal"><span class="pre">_generateMarkup</span></tt> method, which can only be there once for the whole decorator. For example, the double border Mixin already implements that because it needs to handle the generation itself.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Decorators</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#using-decorators">Using Decorators</a></li>
<li><a class="reference internal" href="#decoration-theme">Decoration Theme</a></li>
<li><a class="reference internal" href="#custom-decorators">Custom Decorators</a></li>
<li><a class="reference internal" href="#writing-decorators">Writing Decorators</a></li>
<li><a class="reference internal" href="#writing-decorator-mixins">Writing Decorator Mixins</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="ui_custom_themes.html"
                                  title="previous chapter">Custom Themes</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="ui_webfonts.html"
                                  title="next chapter">Web Fonts</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/pages/gui_toolkit/ui_decorators.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; Copyright 2011, qooxdoo developers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0b2.
    </div>
  </body>
</html>